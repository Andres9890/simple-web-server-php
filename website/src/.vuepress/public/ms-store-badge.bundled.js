var e,a,i,n,m,g=function(e,a,i,n,m){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!m)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof a?e!==a||!m:!a.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?m.call(e,i):m?m.value=i:a.set(e,i),i},l=function(e,a,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof a?e!==a||!n:!a.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:a.get(e)};class t extends HTMLElement{constructor(){super(),this.productId="",this.size="large",this.language="",e.set(this,t.englishLanguage),a.set(this,"prod"),i.set(this,"dev"===l(this,a,"f")?"iframe.html":"https://get.microsoft.com/iframe.html"),n.set(this,"dev"===l(this,a,"f")?"/images":"https://getbadgecdn.azureedge.net/images"),m.set(this,{isWindows:!1,windowsVersion:null,isEdgeBrowser:!1}),this.getPlatformDetails().then((e=>g(this,m,e,"f"))),g(this,e,t.getSupportedLanguageFromCode(this.language),"f"),this.language=l(this,e,"f").code;const r=this.attachShadow({mode:"open"}),o=this.createStyle(),s=this.createHtml();r.appendChild(o),r.appendChild(s)}updateImageSrc(){var e;const a=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("img");a&&(a.setAttribute("src",this.getImageSource()),a.className=this.getImageClass())}connectedCallback(){}static get observedAttributes(){return["productid","size","language"]}attributeChangedCallback(a,i,n){"size"!==a||"large"!==n&&"small"!==n||i===n?"language"!==a||n===i||"string"!=typeof n&&n?"productid"===a&&n!==i&&"string"==typeof n&&(this.productId=n):(g(this,e,t.getSupportedLanguageFromCode(n),"f"),this.language=l(this,e,"f").code,this.updateImageSrc()):(this.size=n,this.updateImageSrc())}createStyle(){const e=document.createElement("style");return e.textContent="\n      :host {\n        display: inline-block;\n        cursor: pointer;\n        height: fit-content;\n      }\n\n      iframe {\n        border: none;\n        width: 0px;\n        height: 0px;\n      }\n\n      img {\n        width: auto;\n        border-radius: 8px;\n      }\n\n      img.small {\n        max-height: 52px;\n      }\n\n      img.large {\n        max-height: 60px;\n      }\n    ",e}createHtml(){const e=document.createElement("div");return e.appendChild(this.createImage()),e.appendChild(this.createIFrame()),e}async getPlatformDetails(){const e=navigator;if(e.userAgentData&&e.userAgentData.getHighEntropyValues)try{const a=await e.userAgentData.getHighEntropyValues(["platform","platformVersion"]),i="Windows"===a.platform;return{isWindows:i,windowsVersion:i?parseFloat((null==a?void 0:a.platformVersion)||""):null,isEdgeBrowser:(e.userAgentData.brands||[]).some((e=>"Microsoft Edge"===e.brand))}}catch(e){}const a=new RegExp(/.?Windows NT (\d+\.?\d?\.?\d?\.?\d?)/gi).exec(navigator.userAgent);return a&&a.length>=2?{isWindows:!0,windowsVersion:parseFloat(a[1]),isEdgeBrowser:!!navigator.userAgent.match("Edg/")}:{isWindows:!1,windowsVersion:null,isEdgeBrowser:!!navigator.userAgent.match("Edg/")}}static getSupportedLanguageFromCode(e){if(!e)return t.getSupportedLanguageFromUserAgent();const a=t.supportedLanguages.find((a=>a.code===e.toLowerCase()));return a||t.englishLanguage}static getSupportedLanguageFromUserAgent(){const e=t.supportedLanguages.find((e=>e.name===navigator.language));if(e)return e;if(navigator.languages){var a=navigator.languages.map((e=>t.supportedLanguages.find((a=>a.code===e)))).find((e=>!!e));if(a)return a}const i=navigator.language.indexOf("-");if(i>0){const e=navigator.language.substring(0,i),a=t.supportedLanguages.find((a=>a.name===e));if(a)return a}return t.englishLanguage}createIFrame(){const e=document.createElement("iframe");return e.setAttribute("loading","eager"),e.title="Microsoft Store App Badge",e.src=l(this,i,"f"),e}createImage(){const e=document.createElement("img");return e.setAttribute("part","img"),e.src=this.getImageSource(),e.className=this.getImageClass(),e.alt="Microsoft Store app badge",e.addEventListener("click",(e=>this.launchApp(e))),e}getImageSource(){const a="large"===this.size?l(this,e,"f").imageLarge.fileName:l(this,e,"f").imageSmall.fileName;return`${l(this,n,"f")}/${a}`}getImageClass(){return"large"===this.size?"large":"small"}launchApp(e){this.productId&&(l(this,m,"f").isWindows&&l(this,m,"f").isEdgeBrowser?this.launchStoreAppPdpViaWhitelistedDomain():l(this,m,"f").isWindows?this.launchStoreAppPdp():this.launchStoreWebPdp(e))}launchStoreAppPdp(){const e="ms-windows-store://pdp/?productid="+this.productId+"&mode=mini&pos="+Math.floor(window.screenLeft*window.devicePixelRatio)+","+Math.floor(window.screenTop*window.devicePixelRatio)+","+Math.floor(window.outerWidth*window.devicePixelRatio)+","+Math.floor(window.outerHeight*window.devicePixelRatio);location.href=e}launchStoreAppPdpViaWhitelistedDomain(){var e,a;const i=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("iframe");if(i){const e={message:"launch",productId:this.productId};null===(a=i.contentWindow)||void 0===a||a.postMessage(e,"*")}}launchStoreWebPdp(e){const a=`https://apps.microsoft.com/store/detail/${this.productId}`;window.open(a,"_blank")}static createSupportedLanguages(){return[{name:"Arabic",code:"ar",imageSmall:{fileName:"Arabic_S.png"},imageLarge:{fileName:"Arabic_L.png"}},{name:"Bosnian",code:"be",imageSmall:{fileName:"Bosnian_S.png"},imageLarge:{fileName:"Bosnian_L.png"}},{name:"Bengali",code:"bn",imageSmall:{fileName:"Bengali_S.png"},imageLarge:{fileName:"Bengali_L.png"}},{name:"Bosnian",code:"bs",imageSmall:{fileName:"Bosnian_S.png"},imageLarge:{fileName:"Bosnian_L.png"}},{name:"Bulgarian",code:"bg",imageSmall:{fileName:"Bulgarian_S.png"},imageLarge:{fileName:"Bulgarian_L.png"}},{name:"Chinese (Simplified)",code:"zh-cn",imageSmall:{fileName:"Chinese_Simplified_S.png"},imageLarge:{fileName:"Chinese_Simplified_L.png"}},{name:"Chinese (Traditional)",code:"zh-tw",imageSmall:{fileName:"Chinese_Traditional_S.png"},imageLarge:{fileName:"Chinese_Traditional_L.png"}},{name:"Croatian",code:"hr",imageSmall:{fileName:"Croatian_S.png"},imageLarge:{fileName:"Croatian_L.png"}},{name:"Czech",code:"cs",imageSmall:{fileName:"Czech_S.png"},imageLarge:{fileName:"Czech_L.png"}},{name:"Danish",code:"da",imageSmall:{fileName:"Danish_S.png"},imageLarge:{fileName:"Danish_L.png"}},{name:"Dutch",code:"nl",imageSmall:{fileName:"Dutch_S.png"},imageLarge:{fileName:"Dutch_L.png"}},t.englishLanguage,{name:"Estonian",code:"et",imageSmall:{fileName:"Estonian_S.png"},imageLarge:{fileName:"Estonian_L.png"}},{name:"Filipino",code:"fil",imageSmall:{fileName:"Filipino_S.png"},imageLarge:{fileName:"Filipino_L.png"}},{name:"Finnish",code:"fi",imageSmall:{fileName:"Finnish_S.png"},imageLarge:{fileName:"Finnish_L.png"}},{name:"French",code:"fr",imageSmall:{fileName:"French_S.png"},imageLarge:{fileName:"French_L.png"}},{name:"German",code:"de",imageSmall:{fileName:"German_S.png"},imageLarge:{fileName:"German_L.png"}},{name:"Greek",code:"el",imageSmall:{fileName:"Greek_S.png"},imageLarge:{fileName:"Greek_L.png"}},{name:"Hebrew",code:"he",imageSmall:{fileName:"Hebrew_S.png"},imageLarge:{fileName:"Hebrew_L.png"}},{name:"Hindi",code:"hi",imageSmall:{fileName:"Hindi_S.png"},imageLarge:{fileName:"Hindi_L.png"}},{name:"Hungarian",code:"hu",imageSmall:{fileName:"Hungarian_S.png"},imageLarge:{fileName:"Hungarian_L.png"}},{name:"Indonesian",code:"id",imageSmall:{fileName:"Indonesian_S.png"},imageLarge:{fileName:"Indonesian_L.png"}},{name:"Italian",code:"it",imageSmall:{fileName:"Italian_S.png"},imageLarge:{fileName:"Italian_L.png"}},{name:"Japanese",code:"ja",imageSmall:{fileName:"Japanese_S.png"},imageLarge:{fileName:"Japanese_L.png"}},{name:"Korean",code:"ko",imageSmall:{fileName:"Korean_S.png"},imageLarge:{fileName:"Korean_L.png"}},{name:"Latvian",code:"lv",imageSmall:{fileName:"Latvian_S.png"},imageLarge:{fileName:"Latvian_L.png"}},{name:"Lithuanian",code:"lt",imageSmall:{fileName:"Lithuanian_S.png"},imageLarge:{fileName:"Lithuanian_L.png"}},{name:"Malay",code:"ms",imageSmall:{fileName:"Malay_S.png"},imageLarge:{fileName:"Malay_L.png"}},{name:"Norwegian",code:"no",imageSmall:{fileName:"Norwegian_S.png"},imageLarge:{fileName:"Norwegian_L.png"}},{name:"Polish",code:"pl",imageSmall:{fileName:"Polish_S.png"},imageLarge:{fileName:"Polish_L.png"}},{name:"Portuguese (Brazil)",code:"pt-br",imageSmall:{fileName:"Portuguese_Brazil_S.png"},imageLarge:{fileName:"Portuguese_Brazil_L.png"}},{name:"Portuguese (Portugal)",code:"pt",imageSmall:{fileName:"Portuguese_Portugal_S.png"},imageLarge:{fileName:"Portuguese_Portugal_L.png"}},{name:"Romanian",code:"ro",imageSmall:{fileName:"Romanian_S.png"},imageLarge:{fileName:"Romanian_L.png"}},{name:"Russian",code:"ru",imageSmall:{fileName:"Russian_S.png"},imageLarge:{fileName:"Russian_L.png"}},{name:"Serbian",code:"sr",imageSmall:{fileName:"Serbian_S.png"},imageLarge:{fileName:"Serbian_L.png"}},{name:"Slovak",code:"sk",imageSmall:{fileName:"Slovak_S.png"},imageLarge:{fileName:"Slovak_L.png"}},{name:"Slovenian",code:"sl",imageSmall:{fileName:"Slovenian_S.png"},imageLarge:{fileName:"Slovenian_L.png"}},{name:"Spanish",code:"es",imageSmall:{fileName:"Spanish_S.png"},imageLarge:{fileName:"Spanish_L.png"}},{name:"Swahili",code:"sw",imageSmall:{fileName:"Swahili_S.png"},imageLarge:{fileName:"Swahili_L.png"}},{name:"Swedish",code:"sv",imageSmall:{fileName:"Swedish_S.png"},imageLarge:{fileName:"Swedish_L.png"}},{name:"Thai",code:"th",imageSmall:{fileName:"Thai_S.png"},imageLarge:{fileName:"Thai_L.png"}},{name:"Turkish",code:"tr",imageSmall:{fileName:"Turkish_S.png"},imageLarge:{fileName:"Turkish_L.png"}},{name:"Ukranian",code:"uk",imageSmall:{fileName:"Ukranian_S.png"},imageLarge:{fileName:"Ukranian_L.png"}},{name:"Vietnamese",code:"vi",imageSmall:{fileName:"Vietnamese_S.png"},imageLarge:{fileName:"Vietnamese_L.png"}}]}}e=new WeakMap,a=new WeakMap,i=new WeakMap,n=new WeakMap,m=new WeakMap,t.englishLanguage={name:"English",code:"en",imageSmall:{fileName:"English_S.png"},imageLarge:{fileName:"English_L.png"}},t.supportedLanguages=t.createSupportedLanguages(),customElements.define("ms-store-badge",t);
